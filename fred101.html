<!DOCTYPE>
<html>
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <title>HTML Events on 3D objects</title>
      <script src="x3dom-full.js"></script>
    <link rel='stylesheet' type='text/css' href='http://www.x3dom.org/download/x3dom.css'/>
    
     <script src="jquery-2.1.0.min.js" ></script>
    
    
    <script>
        //Round a float value to x.xx format
        function roundWithTwoDecimals(value)
        {
            return (Math.round(value * 100)) / 100;
        }
    
        //Handle click on any group member
        function handleGroupClick(event)
        {
            //Mark hitting point
            $('#marker').attr('translation', event.hitPnt);
            console.log(event);
            
            //Display coordinates of hitting point (rounded)
            var coordinates = event.hitPnt;
            $('#coordX').html(roundWithTwoDecimals(coordinates[0]));
            $('#coordY').html(roundWithTwoDecimals(coordinates[1]));
            $('#coordZ').html(roundWithTwoDecimals(coordinates[2]));
               
                

        }
        
        //Handle click on a shape
        function handleSingleClick(shape)
        {
                //Last clicked object descriptors
                $('#id_description_line1').html($(shape).attr("def"));
                $('#id_description_line2').html($(shape).attr("def1"));
                $('#id_description_line3').html($(shape).attr("def2"));

                //Second table (KPIs)
                $("#id_table2_kpi1").html($(shape).attr("kpi1"));
                $("#id_table2_kpi2").html($(shape).attr("kpi2"));
                $("#id_table2_kpi3").html($(shape).attr("kpi3"));
                $("#id_table2_kpi4").html($(shape).attr("kpi4"));
        }
        
        $(document).ready(function(){
            //Add a onclick callback to every shape
            $("shape").each(function() {
                $(this).attr("onclick", "handleSingleClick(this)");
            });
        });
        </script>
</head>

<body>

<h1>Object picking example</h1>

<p>
Click on any shape to get the id and the coordinates of the hitting point.
</p>

<X3D  id="boxes" showStat="false" showLog="false" x="0px" y="0px" width="800px" height="800">
    <Scene>
         <Viewpoint position="0 0 5" orientation="0 0 0 0"></Viewpoint>
        <Group onclick="handleGroupClick(event)">




<Transform translation="0 0 0" rotation="0,0,0,0" center="0,0,0" scale=".1 .1 .1"  id="obj1"                             >
<Shape DEF="2088"   DEF1="2011        " DEF2="BALLS HEAD / BERRYS BAY / BLUES POINT / PLATYPUS / HMAS WATERHEN / LAVENDER BAY / MCMAHONS POINT / WAVERTON"  kpi1="12266"   kpi2="1120"    kpi3="981"    kpi4="1206"

>
<Appearance DEF="sphereApp">
 <material diffuseColor='red'></material> 
</Appearance>
 <sphere></sphere> 
</Shape>
</Transform>








<Transform translation="1.5 0 3" rotation="0,0,0,0" center="0,3,0" scale=".1 .1 .1"  id="obj1"                             >
<Shape DEF="2006"   DEF1="2011        " DEF2="BALLS HEAD / BERRYS BAY / BLUES POINT / PLATYPUS / HMAS WATERHEN / LAVENDER BAY / MCMAHONS POINT / WAVERTON"  kpi1="12266"   kpi2="1120"    kpi3="981"    kpi4="1206"

>
<Appearance DEF="sphereApp">
 <material diffuseColor='green'></material> 
</Appearance>
 <sphere></sphere> 
</Shape>
</Transform>


<Transform translation="1.5 0 3" rotation="0,0,0,0" center="0,0,0" scale=".1 .1 .1"  id="obj1"                             >
<Shape DEF="2066"   DEF1="2011        " DEF2="BALLS HEAD / BERRYS BAY / BLUES POINT / PLATYPUS / HMAS WATERHEN / LAVENDER BAY / MCMAHONS POINT / WAVERTON"  kpi1="12266"   kpi2="1120"    kpi3="981"    kpi4="1206"

>
<Appearance DEF="sphereApp">
 <material diffuseColor='blue'></material> 
</Appearance>
 <sphere></sphere> 
</Shape>
</Transform>



<Transform scaleOrientation="0,0,0,0" scale="1,1,1" rotation="0,0,0,0" translation="0,0,0" center="0,0,0" bboxsize="-1,-1,-1" bboxcenter="0,0,0" render="true" id="obj_0">
      <Shape bboxsize="-1,-1,-1" bboxcenter="0,0,0" render="true" id="obj_0_shp">
        <IndexedLineSet colorPerVertex="true" lit="true" ccw="true" solid="true" colorIndex="0 1" coordIndex="0 1" id="obj_0_line">
          <Coordinate point="1.5 0 3, 0, 0, 0" id="obj_0_coor"/>
          <Color color="0 0 0,0 0 0" id="obj_0_color"/>
        </IndexedLineSet>
      </Shape>
    </Transform>


    

    <Transform scaleOrientation="0,0,0,0" center="0,0,0" bboxsize="-1,-1,-1" bboxcenter="0,0,0" render="true" scale="1 1 1" rotation="0 -1 0 1.5708" translation="0 0 0" id="obj_1">
      <Shape bboxsize="-1,-1,-1" bboxcenter="0,0,0" render="true" id="obj_1_shp">
        <Appearance alphaclipthreshold="0.1" id="obj_1_app">
          <Material transparency="0" shininess=".2" ambientIntensity=".2" specularColor="0 0 0" emissiveColor="0 0 0" diffuseColor=".8 .8 .8" id="obj_1_mat"/>
        </Appearance>
        <Circle2D subdivision="32" radius="1" lit="true" ccw="true" solid="true" usegeocache="false" id="obj_1_circle"/>
      </Shape>
    </Transform>
    <Transform scaleOrientation="0,0,0,0" center="0,0,0" bboxsize="-1,-1,-1" bboxcenter="0,0,0" render="true" scale="1 1 1" rotation="0 0 1 0" translation="0 0 0" id="obj_0">
      <Shape bboxsize="-1,-1,-1" bboxcenter="0,0,0" render="true" id="obj_0_shp">
        <Appearance alphaclipthreshold="0.1" id="obj_0_app">
          <Material transparency="0" shininess=".2" ambientIntensity=".2" specularColor="0 0 0" emissiveColor="0 0 0" diffuseColor=".8 .8 .8" id="obj_0_mat"/>
        </Appearance>
        <Circle2D subdivision="32" radius="1" lit="true" ccw="true" solid="true" usegeocache="false" id="obj_0_circle"/>
      </Shape>
    </Transform>




    
    
    
        </Scene>
</X3D>

<div style="position:absolute;left:820px;top:70px;width:200px">
    <h3>Last clicked object:</h3> 
    <label for="id_description_line1">Postcode</label><div id="id_description_line1">-</div>
    <label for="id_description_line2">Year<div id="id_description_line2">-</div>
    <label for="id_description_line3">Suburb<div id="id_description_line3">-</div>
    <br/>
    
    <h3>Click coordinates:</h3>
    <table style="font-size:1em;">
        <tr><td>x: </td><td id="coordX">-</td></tr>
        <tr><td>y: </td><td id="coordY">-</td></tr>
        <tr><td>z: </td><td id="coordZ">-</td></tr>
    </table>

        <br/>
  
        <h3>KPIs</h3>
        <table style="font-size:1em;">
             <tr><td>Population: </td><td id="id_table2_kpi1">-</td></tr>
             <tr><td>Advantage & Disadvantage: </td><td id="id_table2_kpi2">-</td></tr>
             <tr><td>Economic: </td><td id="id_table2_kpi3">-</td></tr> 
             <tr><td>Educ & Occ: </td><td id="id_table2_kpi4">-</td></tr>
        </table>
</div>

</body>
</html>
