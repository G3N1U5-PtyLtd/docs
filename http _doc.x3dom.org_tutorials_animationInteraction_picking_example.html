<!DOCTYPE html>
<html><head>
<meta http-equiv="content-type" content="text/html; charset=windows-1252"><title>http://doc.x3dom.org/tutorials/animationInteraction/picking/example.html</title><link rel="stylesheet" type="text/css" href="http%20_doc.x3dom.org_tutorials_animationInteraction_picking_example_files/viewsource.css"></head><body contextmenu="actions" id="viewsource" class="highlight" style="-moz-tab-size: 4"><pre id="line1"><span></span><span title="Missing space before doctype name.
Nameless doctype.
Quirky doctype. Expected “&lt;!DOCTYPE html&gt;”." class="error error error doctype">&lt;!DOCTYPE&gt;</span><span>
<span id="line2"></span></span><span>&lt;<span class="start-tag">html</span>&gt;</span><span>
<span id="line3"></span></span><span>&lt;<span class="start-tag">head</span>&gt;</span><span>
<span id="line4"></span>    </span><span>&lt;<span class="start-tag">meta</span> <span class="attribute-name">http-equiv</span>="<a class="attribute-value">X-UA-Compatible</a>" <span class="attribute-name">content</span>="<a class="attribute-value">IE=edge</a>"<span>/</span>&gt;</span><span>
<span id="line5"></span>    </span><span>&lt;<span class="start-tag">title</span>&gt;</span><span>HTML Events on 3D objects</span><span>&lt;/<span class="end-tag">title</span>&gt;</span><span>
<span id="line6"></span>    </span><span>&lt;<span class="start-tag">script</span> <span class="attribute-name">type</span>="<a class="attribute-value">text/javascript</a>" <span class="attribute-name">src</span>="<a href="view-source:http://ff.kis.scr.kaspersky-labs.com/91CCC789-6F0C-1F40-AD21-8B0C4CD9C5E2/main.js" class="attribute-value">http://ff.kis.scr.kaspersky-labs.com/91CCC789-6F0C-1F40-AD21-8B0C4CD9C5E2/main.js</a>" <span class="attribute-name">charset</span>="<a class="attribute-value">UTF-8</a>"&gt;</span><span></span><span>&lt;/<span class="end-tag">script</span>&gt;</span><span></span><span>&lt;<span class="start-tag">script</span> <span class="attribute-name">type</span>='<a class="attribute-value">text/javascript</a>' <span class="attribute-name">src</span>='<a href="view-source:http://www.x3dom.org/download/x3dom.js" class="attribute-value">http://www.x3dom.org/download/x3dom.js</a>'&gt;</span><span> </span><span>&lt;/<span class="end-tag">script</span>&gt;</span><span>
<span id="line7"></span>    </span><span>&lt;<span class="start-tag">link</span> <span class="attribute-name">rel</span>='<a class="attribute-value">stylesheet</a>' <span class="attribute-name">type</span>='<a class="attribute-value">text/css</a>' <span class="attribute-name">href</span>='<a href="view-source:http://www.x3dom.org/download/x3dom.css" class="attribute-value">http://www.x3dom.org/download/x3dom.css</a>'<span>/</span>&gt;</span><span>
<span id="line8"></span>    
<span id="line9"></span>     </span><span>&lt;<span class="start-tag">script</span> <span class="attribute-name">type</span>="<a class="attribute-value">text/javascript</a>" <span class="attribute-name">src</span>="<a href="view-source:http://code.jquery.com/jquery-2.1.0.min.js" class="attribute-value">http://code.jquery.com/jquery-2.1.0.min.js</a>" &gt;</span><span></span><span>&lt;/<span class="end-tag">script</span>&gt;</span><span>
<span id="line10"></span>    
<span id="line11"></span>    
<span id="line12"></span>    </span><span>&lt;<span class="start-tag">script</span>&gt;</span><span>
<span id="line13"></span>    	//Round a float value to x.xx format
<span id="line14"></span>    	function roundWithTwoDecimals(value)
<span id="line15"></span>    	{
<span id="line16"></span>    		return (Math.round(value * 100)) / 100;
<span id="line17"></span>    	}
<span id="line18"></span>    
<span id="line19"></span>    	//Handle click on any group member
<span id="line20"></span>    	function handleGroupClick(event)
<span id="line21"></span>    	{
<span id="line22"></span>    		//Mark hitting point
<span id="line23"></span>    		$('#marker').attr('translation', event.hitPnt);
<span id="line24"></span>    		console.log(event);
<span id="line25"></span>    		
<span id="line26"></span>    		//Display coordinates of hitting point (rounded)
<span id="line27"></span>    		var coordinates = event.hitPnt;
<span id="line28"></span>    		$('#coordX').html(roundWithTwoDecimals(coordinates[0]));
<span id="line29"></span>    		$('#coordY').html(roundWithTwoDecimals(coordinates[1]));
<span id="line30"></span>    		$('#coordZ').html(roundWithTwoDecimals(coordinates[2]));
<span id="line31"></span>    	}
<span id="line32"></span>    	
<span id="line33"></span>    	//Handle click on a shape
<span id="line34"></span>    	function handleSingleClick(shape)
<span id="line35"></span>    	{
<span id="line36"></span>    		$('#lastClickedObject').html($(shape).attr("def"));
<span id="line37"></span>    		
<span id="line38"></span>    	}
<span id="line39"></span>        
<span id="line40"></span>        $(document).ready(function(){
<span id="line41"></span>        	//Add a onclick callback to every shape
<span id="line42"></span>        	$("shape").each(function() {
<span id="line43"></span>        		$(this).attr("onclick", "handleSingleClick(this)");
<span id="line44"></span>        	});
<span id="line45"></span>        });
<span id="line46"></span>        </span><span>&lt;/<span class="end-tag">script</span>&gt;</span><span>
<span id="line47"></span></span><span>&lt;/<span class="end-tag">head</span>&gt;</span><span>
<span id="line48"></span>
<span id="line49"></span></span><span>&lt;<span class="start-tag">body</span>&gt;</span><span>
<span id="line50"></span>
<span id="line51"></span></span><span>&lt;<span class="start-tag">h1</span>&gt;</span><span>Object picking example</span><span>&lt;/<span class="end-tag">h1</span>&gt;</span><span>
<span id="line52"></span>
<span id="line53"></span></span><span>&lt;<span class="start-tag">p</span>&gt;</span><span>
<span id="line54"></span>Click on any shape to get the id and the coordinates of the hitting point.
<span id="line55"></span></span><span>&lt;/<span class="end-tag">p</span>&gt;</span><span>
<span id="line56"></span>
<span id="line57"></span></span><span>&lt;<span class="start-tag">X3D</span>  <span class="attribute-name">id</span>="<a class="attribute-value">boxes</a>" <span class="attribute-name">showStat</span>="<a class="attribute-value">false</a>" <span class="attribute-name">showLog</span>="<a class="attribute-value">false</a>" <span class="attribute-name">x</span>="<a class="attribute-value">0px</a>" <span class="attribute-name">y</span>="<a class="attribute-value">0px</a>" <span class="attribute-name">width</span>="<a class="attribute-value">500px</a>" <span class="attribute-name">height</span>="<a class="attribute-value">500px</a>"&gt;</span><span>
<span id="line58"></span>    </span><span>&lt;<span class="start-tag">Scene</span>&gt;</span><span>
<span id="line59"></span>        </span><span>&lt;<span class="start-tag">Viewpoint</span> <span class="attribute-name">position</span>="<a class="attribute-value">-2.25680 3.36560 14.62828</a>" <span class="attribute-name">orientation</span>="<a class="attribute-value">-0.60104 -0.28053 0.74837 0.40903</a>"&gt;</span><span></span><span>&lt;/<span class="end-tag">Viewpoint</span>&gt;</span><span>
<span id="line60"></span>        </span><span>&lt;<span class="start-tag">Group</span> <span class="attribute-name">onclick</span>="<a class="attribute-value">handleGroupClick(event)</a>"&gt;</span><span>
<span id="line61"></span>
<span id="line62"></span>            </span><span>&lt;<span class="start-tag">Transform</span> <span class="attribute-name">DEF</span>="<a class="attribute-value">coneTrafo</a>" <span class="attribute-name">translation</span>="<a class="attribute-value">-4.5 0 0</a>"&gt;</span><span>
<span id="line63"></span>                </span><span>&lt;<span class="start-tag">Shape</span> <span class="attribute-name">DEF</span>="<a class="attribute-value">coneShape</a>"&gt;</span><span>
<span id="line64"></span>                    </span><span>&lt;<span class="start-tag">Appearance</span> <span class="attribute-name">DEF</span>="<a class="attribute-value">coneApp</a>"&gt;</span><span>
<span id="line65"></span>                        </span><span>&lt;<span class="start-tag">Material</span> <span class="attribute-name">diffuseColor</span>="<a class="attribute-value">#FF6633</a>"&gt;</span><span></span><span>&lt;/<span class="end-tag">Material</span>&gt;</span><span>
<span id="line66"></span>                    </span><span>&lt;/<span class="end-tag">Appearance</span>&gt;</span><span>
<span id="line67"></span>                    </span><span>&lt;<span class="start-tag">Cone</span> <span class="attribute-name">DEF</span>="<a class="attribute-value">cone</a>" &gt;</span><span></span><span>&lt;/<span class="end-tag">Cone</span>&gt;</span><span>
<span id="line68"></span>                </span><span>&lt;/<span class="end-tag">Shape</span>&gt;</span><span>
<span id="line69"></span>            </span><span>&lt;/<span class="end-tag">Transform</span>&gt;</span><span>
<span id="line70"></span>
<span id="line71"></span>            </span><span>&lt;<span class="start-tag">Transform</span> <span class="attribute-name">DEF</span>="<a class="attribute-value">boxTrafo</a>" <span class="attribute-name">translation</span>='<a class="attribute-value">-1.5 0 0</a>'&gt;</span><span>
<span id="line72"></span>                </span><span>&lt;<span class="start-tag">Shape</span> <span class="attribute-name">DEF</span>="<a class="attribute-value">boxShape</a>"&gt;</span><span>
<span id="line73"></span>                    </span><span>&lt;<span class="start-tag">Appearance</span> <span class="attribute-name">DEF</span>="<a class="attribute-value">boxApp</a>"&gt;</span><span>
<span id="line74"></span>                        </span><span>&lt;<span class="start-tag">Material</span> <span class="attribute-name">diffuseColor</span>="<a class="attribute-value">#FF3366</a>"&gt;</span><span></span><span>&lt;/<span class="end-tag">Material</span>&gt;</span><span>
<span id="line75"></span>                    </span><span>&lt;/<span class="end-tag">Appearance</span>&gt;</span><span>
<span id="line76"></span>                    </span><span>&lt;<span class="start-tag">Box</span> <span class="attribute-name">DEF</span>="<a class="attribute-value">box</a>"&gt;</span><span></span><span>&lt;/<span class="end-tag">Box</span>&gt;</span><span>
<span id="line77"></span>                </span><span>&lt;/<span class="end-tag">Shape</span>&gt;</span><span>
<span id="line78"></span>            </span><span>&lt;/<span class="end-tag">Transform</span>&gt;</span><span>
<span id="line79"></span>
<span id="line80"></span>            </span><span>&lt;<span class="start-tag">Transform</span> <span class="attribute-name">DEF</span>="<a class="attribute-value">sphereTrafo</a>" <span class="attribute-name">translation</span>="<a class="attribute-value">1.5 0 0</a>"&gt;</span><span>
<span id="line81"></span>                </span><span>&lt;<span class="start-tag">Shape</span> <span class="attribute-name">DEF</span>="<a class="attribute-value">sphereShape</a>" <span class="attribute-name">id</span>="<a class="attribute-value">test</a>"&gt;</span><span>
<span id="line82"></span>                    </span><span>&lt;<span class="start-tag">Appearance</span> <span class="attribute-name">DEF</span>="<a class="attribute-value">sphereApp</a>"&gt;</span><span>
<span id="line83"></span>                        </span><span>&lt;<span class="start-tag">Material</span> <span class="attribute-name">diffuseColor</span>="<a class="attribute-value">#3366FF</a>"&gt;</span><span></span><span>&lt;/<span class="end-tag">Material</span>&gt;</span><span>
<span id="line84"></span>                    </span><span>&lt;/<span class="end-tag">Appearance</span>&gt;</span><span>
<span id="line85"></span>                    </span><span>&lt;<span class="start-tag">Sphere</span> <span class="attribute-name">DEF</span>="<a class="attribute-value">sphere</a>"&gt;</span><span></span><span>&lt;/<span class="end-tag">Sphere</span>&gt;</span><span>
<span id="line86"></span>                </span><span>&lt;/<span class="end-tag">Shape</span>&gt;</span><span>
<span id="line87"></span>            </span><span>&lt;/<span class="end-tag">Transform</span>&gt;</span><span>
<span id="line88"></span>
<span id="line89"></span>            </span><span>&lt;<span class="start-tag">Transform</span> <span class="attribute-name">DEF</span>="<a class="attribute-value">cylinderTrafo</a>" <span class="attribute-name">translation</span>="<a class="attribute-value">4.5 0 0</a>"&gt;</span><span>
<span id="line90"></span>                </span><span>&lt;<span class="start-tag">Shape</span> <span class="attribute-name">DEF</span>="<a class="attribute-value">cylinderShape</a>"&gt;</span><span>
<span id="line91"></span>                    </span><span>&lt;<span class="start-tag">Appearance</span> <span class="attribute-name">DEF</span>="<a class="attribute-value">cylinderApp</a>"&gt;</span><span>
<span id="line92"></span>                        </span><span>&lt;<span class="start-tag">Material</span> <span class="attribute-name">diffuseColor</span>="<a class="attribute-value">#33FF66</a>"&gt;</span><span></span><span>&lt;/<span class="end-tag">Material</span>&gt;</span><span>
<span id="line93"></span>                    </span><span>&lt;/<span class="end-tag">Appearance</span>&gt;</span><span>
<span id="line94"></span>                    </span><span>&lt;<span class="start-tag">Cylinder</span> <span class="attribute-name">DEF</span>="<a class="attribute-value">cylinder</a>" <span class="attribute-name">radius</span>="<a class="attribute-value">1.0</a>" <span class="attribute-name">height</span>="<a class="attribute-value">2.0</a>"&gt;</span><span></span><span>&lt;/<span class="end-tag">Cylinder</span>&gt;</span><span>
<span id="line95"></span>                </span><span>&lt;/<span class="end-tag">Shape</span>&gt;</span><span>
<span id="line96"></span>            </span><span>&lt;/<span class="end-tag">Transform</span>&gt;</span><span>
<span id="line97"></span>
<span id="line98"></span>        </span><span>&lt;/<span class="end-tag">Group</span>&gt;</span><span>
<span id="line99"></span>
<span id="line100"></span>        </span><span>&lt;<span class="start-tag">Transform</span> <span class="attribute-name">id</span>="<a class="attribute-value">marker</a>" <span class="attribute-name">scale</span>="<a class="attribute-value">.15 .15 .15</a>" <span class="attribute-name">translation</span>="<a class="attribute-value">100 0 0</a>"&gt;</span><span>
<span id="line101"></span>            </span><span>&lt;<span class="start-tag">Shape</span>&gt;</span><span>
<span id="line102"></span>                </span><span>&lt;<span class="start-tag">Appearance</span>&gt;</span><span>
<span id="line103"></span>                    </span><span>&lt;<span class="start-tag">Material</span> <span class="attribute-name">diffuseColor</span>="<a class="attribute-value">#FFD966</a>"&gt;</span><span></span><span>&lt;/<span class="end-tag">Material</span>&gt;</span><span>
<span id="line104"></span>                </span><span>&lt;/<span class="end-tag">Appearance</span>&gt;</span><span>
<span id="line105"></span>                </span><span>&lt;<span class="start-tag">Sphere</span>&gt;</span><span></span><span>&lt;/<span class="end-tag">Sphere</span>&gt;</span><span>
<span id="line106"></span>            </span><span>&lt;/<span class="end-tag">Shape</span>&gt;</span><span>
<span id="line107"></span>        </span><span>&lt;/<span class="end-tag">Transform</span>&gt;</span><span>
<span id="line108"></span>
<span id="line109"></span>    </span><span>&lt;/<span class="end-tag">Scene</span>&gt;</span><span>
<span id="line110"></span></span><span>&lt;/<span class="end-tag">X3D</span>&gt;</span><span>
<span id="line111"></span>
<span id="line112"></span></span><span>&lt;<span class="start-tag">div</span> <span class="attribute-name">style</span>="<a class="attribute-value">position:absolute;left:600px;top:70px;width:200px</a>"&gt;</span><span>
<span id="line113"></span>	</span><span>&lt;<span class="start-tag">h3</span>&gt;</span><span>Last clicked object:</span><span>&lt;/<span class="end-tag">h3</span>&gt;</span><span> 
<span id="line114"></span>	</span><span>&lt;<span class="start-tag">span</span> <span class="attribute-name">id</span>="<a class="attribute-value">lastClickedObject</a>"&gt;</span><span>-</span><span>&lt;/<span class="end-tag">span</span>&gt;</span><span>
<span id="line115"></span>	
<span id="line116"></span>	</span><span>&lt;<span class="start-tag">br</span>&gt;</span><span></span><span>&lt;<span class="start-tag">br</span>&gt;</span><span>
<span id="line117"></span>	
<span id="line118"></span>	</span><span>&lt;<span class="start-tag">h3</span>&gt;</span><span>Click coordinates:</span><span>&lt;/<span class="end-tag">h3</span>&gt;</span><span>
<span id="line119"></span>	</span><span>&lt;<span class="start-tag">table</span> <span class="attribute-name">style</span>="<a class="attribute-value">font-size:1em;</a>"&gt;</span><span>
<span id="line120"></span>		</span><span>&lt;<span class="start-tag">tr</span>&gt;</span><span></span><span>&lt;<span class="start-tag">td</span>&gt;</span><span>X: </span><span>&lt;/<span class="end-tag">td</span>&gt;</span><span></span><span>&lt;<span class="start-tag">td</span> <span class="attribute-name">id</span>="<a class="attribute-value">coordX</a>"&gt;</span><span>-</span><span>&lt;/<span class="end-tag">td</span>&gt;</span><span></span><span>&lt;/<span class="end-tag">tr</span>&gt;</span><span>
<span id="line121"></span>		</span><span>&lt;<span class="start-tag">tr</span>&gt;</span><span></span><span>&lt;<span class="start-tag">td</span>&gt;</span><span>Y: </span><span>&lt;/<span class="end-tag">td</span>&gt;</span><span></span><span>&lt;<span class="start-tag">td</span> <span class="attribute-name">id</span>="<a class="attribute-value">coordY</a>"&gt;</span><span>-</span><span>&lt;/<span class="end-tag">td</span>&gt;</span><span></span><span>&lt;/<span class="end-tag">tr</span>&gt;</span><span>
<span id="line122"></span>		</span><span>&lt;<span class="start-tag">tr</span>&gt;</span><span></span><span>&lt;<span class="start-tag">td</span>&gt;</span><span>Z: </span><span>&lt;/<span class="end-tag">td</span>&gt;</span><span></span><span>&lt;<span class="start-tag">td</span> <span class="attribute-name">id</span>="<a class="attribute-value">coordZ</a>"&gt;</span><span>-</span><span>&lt;/<span class="end-tag">td</span>&gt;</span><span></span><span>&lt;/<span class="end-tag">tr</span>&gt;</span><span>
<span id="line123"></span>	</span><span>&lt;/<span class="end-tag">table</span>&gt;</span><span>
<span id="line124"></span></span><span>&lt;/<span class="end-tag">div</span>&gt;</span><span>
<span id="line125"></span>
<span id="line126"></span></span><span>&lt;/<span class="end-tag">body</span>&gt;</span><span>
<span id="line127"></span></span><span>&lt;/<span class="end-tag">html</span>&gt;</span><span>
<span id="line128"></span></span></pre><menu id="actions" type="context"><menuitem accesskey="L" label="Go to Line…" id="goToLine"></menuitem><menuitem type="checkbox" label="Wrap Long Lines" id="wrapLongLines"></menuitem><menuitem checked="true" type="checkbox" label="Syntax Highlighting" id="highlightSyntax"></menuitem></menu></body></html>